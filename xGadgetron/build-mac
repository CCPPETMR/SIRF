# Edit paths below to match your system.
# Run using  sh -vex build-mac 

export PYINCLUDE=/usr/local/Frameworks/Python.framework/Versions/2.7/include/python2.7
export PYLIBPATH=/usr/local/Frameworks/Python.framework/Versions/2.7/lib
export PYTHON=python2.7
export WORK_DIR=$HOME/sirf
export SRC_PATH=$WORK_DIR
export BUILD_PATH=$WORK_DIR/build
export INC_DIR=/usr/local/include
export MATLABROOT=/Applications/MATLAB_R2017a.app
export GCC=/usr/bin/gcc
export HDF5_DISABLE_VERSION_CHECK=2
export LD_PRELOAD=/usr/lib/libstdc++.6.dylib
export ISMRMRD_INCLUDE=$HOME/ismrmrd/include/ismrmrd
export LIBISMRMRD=/usr/local/lib

# Remove libraries if present
rm -f $BUILD_PATH/iUtilities/libiutil.a
rm -f $BUILD_PATH/xGadgetron/_pygadgetron.so
rm -f $BUILD_PATH/xGadgetron/libcgt.a


# Make iUtilities build folder if not present, then make iUtilities
mkdir -p $BUILD_PATH/iUtilities
cd $WORK_DIR/iUtilities
make clean -f Makefile_mac 
make -f Makefile_mac

#  Make xGadgetron build folder if not present, then make c, p and m Gadgetron
mkdir -p $BUILD_PATH/xGadgetron
cd $WORK_DIR/xGadgetron/cGadgetron
make clean -f Makefile_mac 
make -f Makefile_mac

cd $WORK_DIR/xGadgetron/pGadgetron
make clean -f Makefile_mac
make -f Makefile_mac


cd $WORK_DIR/xGadgetron/mGadgetron
make clean -f Makefile_mac
make -f Makefile_mac

cd $WORK_DIR

